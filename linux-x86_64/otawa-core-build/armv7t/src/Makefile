# Generated by GLISS V2.0 Copyright (c) 2009 IRIT - UPS (118/04/09 13:03:09)
#	WITH_DYNLIB		compile for dynamically-linkable library

RANLIB?=ranlib

SOURCES = api.c \
	fetch.c \
	decode.c \
	debug.c \
	 \
	mem.c \
	grt.c \
	error.c \
	gen_int.c \
	loader.c \
	code.c \
	env.c \
	sys_call.c \
	shift.c \
	disasm.c \
	used_regs.c \
	disasm.c

OBJECTS=$(SOURCES:.c=.o)

CLEAN = $(OBJECTS)
DISTCLEAN = libarm.a

CFLAGS += -g3 -O3  -I../include
ifdef WITH_DYNLIB
CFLAGS += -fPIC
endif


all: libarm.a

libarm.a: $(OBJECTS)
	$(AR) rcsu $@ $^
	$(RANLIB) $@

clean:
	-rm -rf $(CLEAN)

distclean: clean
	-rm -rf $(DISTCLEAN)

# other dependencies
fetch.o: fetch_table.h
code.o: code_table.h
decode.o: decode_table.h
